<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!--    WYÅšWIETLANIE i pozostale rzedy tabelki -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Champions List</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.0/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/Champions.css}">
    <div th:replace="~{fragments/navbar :: navbar}"></div>
</head>
<body>
<div class="vs">
    <div class="row">
        <div class="col-md-6 text-start">
            <img th:src="${'https://ddragon.leagueoflegends.com/cdn/' + version +'/img/champion/' + champion1Image.full}">
            <h1 th:text="${champion1Data.name}"></h1>
            <p th:text="${champion1Data.title}"></p>
        </div>

        <div class="col-md-6 text-end">
            <img th:src="${'https://ddragon.leagueoflegends.com/cdn/' + version +'/img/champion/' + champion2Image.full}">
            <h1 th:text="${champion2Data.name}"></h1>
            <p th:text="${champion2Data.title}"></p>
        </div>
    </div>

    <!--    <td>HP:</td>-->
    <!--    <td>-->
    <!--        <span th:text="${champion1Stats.hp}"></span>-->
    <!--        <span th:if="${champion1Stats.hp > champion2Stats.hp}" th:class="${'positive'}"> -<span th:text="${champion1Stats.hp - champion2Stats.hp}"></span></span>-->
    <!--        <span th:if="${champion1Stats.hp < champion2Stats.hp}" th:class="${'negative'}"> +<span th:text="${champion2Stats.hp - champion1Stats.hp}"></span></span>-->
    <!--    </td>-->

    <label for="selectNumber">Select a level:</label>
    <select id="selectNumber" name="selectNumber">
        <option value="1" selected>Level 1</option>
        <script th:inline="javascript">
            var selectElement = document.getElementById("selectNumber");

            for (var i = 2; i <= 18; i++) {
                var option = document.createElement("option");
                option.value = i;
                option.textContent = "Level " + i;
                selectElement.appendChild(option);
            }
        </script>
    </select>

    <br><br>

</div>
<div class="row justify-content-center mt-4">
    <table>
        <tr>
            <td>HP:</td>
            <td>
                <span id="champion1Hp" th:attr="data-initial=${champion1Stats.hp}, data-per-level=${champion1Stats.hpperlevel}"></span>
                <span id="champion2Hp" th:attr="data-initial=${champion2Stats.hp}, data-per-level=${champion2Stats.hpperlevel}" style="display:none;"></span>
                <span id="hpDifference" class="difference"></span>
            </td>
            <td>HP per level:</td>
            <td>
                <span id="champion1HpPerLevel" th:attr="data-initial=${champion1Stats.hpperlevel}, data-per-level=${champion1Stats.hpperlevel}"></span>
                <span id="champion2HpPerLevel" th:attr="data-initial=${champion2Stats.hpperlevel}, data-per-level=${champion2Stats.hpperlevel}" style="display:none;"></span>
                <span id="hpPerLevelDifference" class="difference"></span>
            </td>
        </tr>
<!--        <tr>-->
<!--            <td>MP:</td>-->
<!--            <td>-->
<!--                <span id="champion1Mp" th:attr="data-initial=${champion1Stats.mp}, data-per-level=${champion1Stats.mpperlevel}"></span>-->
<!--                <span id="champion2Mp" th:attr="data-initial=${champion2Stats.mp}, data-per-level=${champion2Stats.mpperlevel}" style="display:none;"></span>-->
<!--                <span id="mpDifference" class="difference"></span>-->
<!--            </td>-->
<!--            <td>MP per level:</td>-->
<!--            <td>-->
<!--                <span id="champion1MpPerLevel" th:text="${champion1Stats.mpperlevel}"></span>-->
<!--                <span id="champion2MpPerLevel" th:text="${champion2Stats.mpperlevel}" style="display:none;"></span>-->
<!--                <span id="mpPerLevelDifference" class="difference"></span>-->
<!--            </td>-->
<!--        </tr>-->

        <!--            <tr>-->
        <!--                <td>Armor:</td>-->
        <!--                <td><span id="armorValue" th:attr="data-initial=${championStats.armor}, data-per-level=${championStats.armorperlevel}"></span></td>-->
        <!--                <td>Armor per level:</td>-->
        <!--                <td><span id="armorPerLevelValue" th:text="${championStats.armorperlevel}"></span></td>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--                <td>Spell block:</td>-->
        <!--                <td><span id="spellblockValue" th:attr="data-initial=${championStats.spellblock}, data-per-level=${championStats.spellblockperlevel}"></span></td>-->
        <!--                <td>Spell block per level:</td>-->
        <!--                <td><span id="spellblockPerLevelValue" th:text="${championStats.spellblockperlevel}"></span></td>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--                <td>Movespeed:</td>-->
        <!--                <td><span th:text="${championStats.movespeed}"></span></td>-->
        <!--                <td>Attack range:</td>-->
        <!--                <td><span th:text="${championStats.attackrange}"></span></td>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--                <td>HP regeneration:</td>-->
        <!--                <td><span id="hpregenValue" th:attr="data-initial=${championStats.hpregen}, data-per-level=${championStats.hpregenperlevel}"></span></td>-->
        <!--                <td>HP regeneration per level:</td>-->
        <!--                <td><span id="hpregenPerLevelValue" th:text="${championStats.hpregenperlevel}"></span></td>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--                <td>MP regeneration:</td>-->
        <!--                <td><span id="mpregenValue" th:attr="data-initial=${championStats.mpregen}, data-per-level=${championStats.mpregenperlevel}"></span></td>-->
        <!--                <td>MP regeneration per level:</td>-->
        <!--                <td><span id="mpregenPerLevelValue" th:text="${championStats.mpregenperlevel}"></span></td>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--                <td>Critical Strike:</td>-->
        <!--                <td><span id="critValue" th:attr="data-initial=${championStats.crit}, data-per-level=${championStats.critperlevel}"></span></td>-->
        <!--                <td>Critical Strike per level:</td>-->
        <!--                <td><span id="critPerLevelValue" th:text="${championStats.critperlevel}"></span></td>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--                <td>Attack damage:</td>-->
        <!--                <td><span id="attackdamageValue" th:attr="data-initial=${championStats.attackdamage}, data-per-level=${championStats.attackdamageperlevel}"></span></td>-->
        <!--                <td>Attack damage per level:</td>-->
        <!--                <td><span id="attackdamagePerLevelValue" th:text="${championStats.attackdamageperlevel}"></span></td>-->
        <!--            </tr>-->
        <!--            <tr>-->
        <!--                <td>Attack speed:</td>-->
        <!--                <td><span id="attackspeedValue" th:attr="data-initial=${championStats.attackspeed}, data-per-level=${championStats.attackspeedperlevel}"></span></td>-->
        <!--                <td>Attack speed per level:</td>-->
        <!--                <td><span id="attackspeedPerLevelValue" th:text="${championStats.attackspeedperlevel}"></span></td>-->
        <!--            </tr>-->
    </table>
</div>

<script th:inline="javascript">
    var selectElement = document.getElementById("selectNumber");
    var statElements = {
        "champion1Hp": document.getElementById("champion1Hp"),
        "champion2Hp": document.getElementById("champion2Hp"),
        "hpDifference": document.getElementById("hpDifference"),
        "champion1HpPerLevel": document.getElementById("champion1HpPerLevel"),
        "champion2HpPerLevel": document.getElementById("champion2HpPerLevel"),
        "hpPerLevelDifference": document.getElementById("hpPerLevelDifference"),
    };

    function updateStat(selectedLevel, element, baseValue, perLevelValue) {
        var calculatedValue = baseValue + perLevelValue * (selectedLevel - 1);
        var formattedValue = calculatedValue % 1 === 0 ? calculatedValue : calculatedValue.toFixed(2);
        element.textContent = formattedValue;
    }

    // Add an initial update when the page loads
    document.addEventListener("DOMContentLoaded", function() {
        updateStats();
    });

    selectElement.addEventListener("change", function () {
        updateStats();
    });

    function updateStats() {
        var selectedLevel = parseInt(selectElement.value);
        var baseHp1 = parseInt([[${champion1Stats.hp}]]);
        var perLevelHp1 = parseInt([[${champion1Stats.hpperlevel}]]);
        var baseHp2 = parseInt([[${champion2Stats.hp}]]);
        var perLevelHp2 = parseInt([[${champion2Stats.hpperlevel}]]);

        updateStat(selectedLevel, statElements["champion1Hp"], baseHp1, perLevelHp1);
        updateStat(selectedLevel, statElements["champion2Hp"], baseHp2, perLevelHp2);

        // Calculate and display HP difference
        var hpDifference = (baseHp1 + perLevelHp1 * (selectedLevel - 1)) - (baseHp2 + perLevelHp2 * (selectedLevel - 1));
        statElements["hpDifference"].textContent = hpDifference >= 0 ? '+' + hpDifference : hpDifference;

        // Set HP per level values directly
        statElements["champion1HpPerLevel"].textContent = perLevelHp1;
        statElements["champion2HpPerLevel"].textContent = perLevelHp2;

        // Calculate and display HP per level difference
        var hpPerLevelDifference = perLevelHp1 - perLevelHp2;
        statElements["hpPerLevelDifference"].textContent = hpPerLevelDifference >= 0 ? '+' + hpPerLevelDifference : hpPerLevelDifference;

        // Hide champion2Hp and champion2HpPerLevel if needed
        statElements["champion2Hp"].style.display = "none";
        statElements["champion2HpPerLevel"].style.display = "none";
    }
</script>



<script th:src="@{/js/infoChampion.js}" defer></script>
</body>
</html>
